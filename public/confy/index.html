<!doctype html>
<html lang="en" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">confy | Comfortable and Configurable Buildsystem | Ivan Mar</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://heysokam.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://heysokam.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://heysokam.github.io/confy"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="confy | Comfortable and Configurable Buildsystem | Ivan Mar"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://heysokam.github.io/confy"><link data-rh="true" rel="alternate" href="https://heysokam.github.io/confy" hreflang="en"><link data-rh="true" rel="alternate" href="https://heysokam.github.io/confy" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Ivan Mar RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Ivan Mar Atom Feed"><link rel="stylesheet" href="/assets/css/styles.19c19d83.css">
<script src="/assets/js/runtime~main.9c8fb31f.js" defer="defer"></script>
<script src="/assets/js/main.1b769467.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Ivan Mar Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Ivan Mar Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ivan Mar | Game &amp; Engine Dev</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/heysokam" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_j9I6"><div class="col col--8"><article><h1>Confy Quickstart Guide</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Confy is a Buildsystem for compiling C, C++ and Nim code.<br>
<!-- -->It is no more than an interface for calling the compilers themselves with a simpler and more ergonomic syntax.<br>
<!-- -->All it does is call <code>CC -o myfile.exe file.c file2.c</code> with the correct options for your project,<br>
<!-- -->based on the options you define in your <code>src/build.nim</code> file.</p>
<blockquote>
<p><em>Important Note:</em><br>
<!-- -->Unlike other buildsystems, Confy is -not- a binary that you call.<br>
<!-- -->Confy is a <strong>library</strong> that you use from inside your Builder App.<br>
<!-- -->This is much more than a semantic difference.<br>
<!-- -->More details about this in the <code>Builder App</code> section, and the disclaimer section @<a href="https://github.com/heysokam/confy/blob/master/readme.md#disclaimer--notes" target="_blank" rel="noopener noreferrer">the confy readme</a> file.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basics">Basics<a href="#basics" class="hash-link" aria-label="Direct link to Basics" title="Direct link to Basics">​</a></h2>
<p>Confy has sane defaults preconfigured.<br>
<!-- -->You don&#x27;t need to change anything if you want to use the preconfigured project structure.<br>
<!-- -->That said, if you want a different setup, you can have it by changing the options described in the @<a href="https://github.com/heysokam/confy/tree/master/doc/config.md" target="_blank" rel="noopener noreferrer">config.md</a> doc file.</p>
<p>A simple build file you could look like:</p>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> confy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> code </span><span class="token operator">=</span><span class="token plain"> srcDir</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">glob</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)"># Get our source by grabbing all code from the `srcDir` folder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> bin  </span><span class="token operator">=</span><span class="token plain"> Program</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Build an executable program</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  src </span><span class="token operator">=</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">              </span><span class="token comment" style="color:rgb(98, 114, 164)"># Define our source code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  trg </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">           </span><span class="token comment" style="color:rgb(98, 114, 164)"># Define our binary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bin</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">                </span><span class="token comment" style="color:rgb(98, 114, 164)"># Order to build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this setup, your binary will:</p>
<div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token list punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Find its source code files by taking all </span><span class="token code-snippet code keyword" style="color:rgb(189, 147, 249);font-style:italic">`.c`</span><span class="token plain"> files inside the </span><span class="token code-snippet code keyword" style="color:rgb(189, 147, 249);font-style:italic">`ROOT/src`</span><span class="token plain"> folder</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token list punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Output the resulting binary into:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token list punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Folder      : </span><span class="token code-snippet code keyword" style="color:rgb(189, 147, 249);font-style:italic">`confy.cfg.binDir`</span><span class="token plain">, which is </span><span class="token code-snippet code keyword" style="color:rgb(189, 147, 249);font-style:italic">`ROOT/bin`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token list punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Binary name : </span><span class="token code-snippet code keyword" style="color:rgb(189, 147, 249);font-style:italic">`hello.exe`</span><span class="token plain"> on windows, </span><span class="token code-snippet code keyword" style="color:rgb(189, 147, 249);font-style:italic">`hello`</span><span class="token plain"> on linux, </span><span class="token code-snippet code keyword" style="color:rgb(189, 147, 249);font-style:italic">`hello.app`</span><span class="token plain"> on mac</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>This means that your application will be output to: <code>ROOT/bin/hello.exe</code></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="two-files--the-builder-and-the-caller">Two Files:  The Builder and the Caller<a href="#two-files--the-builder-and-the-caller" class="hash-link" aria-label="Direct link to Two Files:  The Builder and the Caller" title="Direct link to Two Files:  The Builder and the Caller">​</a></h2>
<p>Confy is <strong>VERY</strong> different to make-like buildsystems. In a big way.<br>
<!-- -->With confy, the buildsystem binary is <strong>yours</strong>.</p>
<p>You control its flow.<br>
<!-- -->You decide when you want to <code>MyTarget.build()</code>,<br>
<!-- -->or when you want to do some low level systems programming/coding before any of that, if you so desire.<br>
<!-- -->You can do whatever you want. The builder application is yours.</p>
<p>This is why you need two files to setup your project:</p>
<ol>
<li>
<p><strong>Builder</strong>: Where you define how to build your project.<br>
<code>REPO/src/build.nim</code></p>
</li>
<li>
<p><strong>Caller</strong>: Where you define how to build the builder itself.<br>
<code>REPO/projectname.nimble</code> or <code>REPO/confy.nims</code></p>
</li>
</ol>
<blockquote>
<p><strong>Important</strong>:<br>
<!-- -->Like everything else in confy, you don&#x27;t <code>need</code> these defaults.<br>
<!-- -->The only required part is that you build a binary that uses the confy functions and config options.<br>
<!-- -->This setup is here just to make things easy and ergonomic to use.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-caller-script">The Caller Script<a href="#the-caller-script" class="hash-link" aria-label="Direct link to The Caller Script" title="Direct link to The Caller Script">​</a></h3>
<p><em>(aka <code>./project.nimble</code> or <code>./confy.nims</code>)</em></p>
<p>The Caller Script is a simple <code>nimscript</code> file that asks nim to compile your builder.</p>
<p>The most minimal Caller Script file possible would be:</p>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token plain"> confy</span><span class="token operator">/</span><span class="token plain">nims</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">confy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That&#x27;s it, really. The rest is just convenience.</p>
<p>To build the project you have two options:</p>
<ul>
<li>Run <code>nim confy.nims</code></li>
<li>Create a nimble task so you can build by running <code>nimble confy</code>:<!-- -->
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">version </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0.1.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">author  </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Someone&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># other nimble related config here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">task confy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This task will build the project with confy&quot;</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  requires </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://github.com/heysokam/confy#head&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  exec </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;nim confy.nims&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<blockquote>
<p>Note:<br>
<!-- -->Just like with the <code>example.nims</code> file, this is just convenience.<br>
<!-- -->The file can be called anything you want. It has no requirements.<br>
<!-- -->Just call the <code>confy()</code> function from nimscript and you are good to go.</p>
</blockquote>
<blockquote>
<p>Important:<br>
<!-- -->You can build your <code>build.nim</code> Builder App however else you want.<br>
<!-- -->All the <code>confy()</code> function does is provide some sane preconfigured defaults for you to make it easier to run the Builder.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-builder-app">The Builder App<a href="#the-builder-app" class="hash-link" aria-label="Direct link to The Builder App" title="Direct link to The Builder App">​</a></h3>
<p><em>(aka <code>./src/build.nim</code>)</em></p>
<p>The Builder App is the actual application that will build your project.<br>
<!-- -->This is the only required part of confy.<br>
<!-- -->Compile the Builder App and run it. That&#x27;s it.</p>
<p>Following the trend of minimalism, lets make the previous example <code>src/build.nim</code> file even simpler:</p>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> confy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Program</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token operator">@</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;src/mycode.c&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;hello&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>That&#x27;s all. The other options are just for changing the defaults.</p>
</blockquote>
<p>You can build this file in whatever way you want, and running it will build your code as expected.<br>
<!-- -->The easiest way to do this is with the <a href="#the-caller-script">Caller Script setup</a> described in the prev secion.</p>
<blockquote>
<p><em>Alternative: Build+Run with <code>nim c -r src/build</code></em></p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="differences-between-c-c-and-nim">Differences between C, C++ and Nim<a href="#differences-between-c-c-and-nim" class="hash-link" aria-label="Direct link to Differences between C, C++ and Nim" title="Direct link to Differences between C, C++ and Nim">​</a></h4>
<p>C/C++ are built exactly the same, and Nim compiles into C.<br>
<!-- -->The only difference between them is the files you send into the <code>src</code> variable.</p>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># If you want to build a Nim app:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> code </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">@</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> srcDir</span><span class="token operator">/</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;myfile.nim&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># If you want to build a C app with only one file:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> code </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">@</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> srcDir</span><span class="token operator">/</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;myfile.c&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># If you want to build a C++ app with only one file:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> code </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">@</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> srcDir</span><span class="token operator">/</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;myfile.cpp&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="nim">Nim<a href="#nim" class="hash-link" aria-label="Direct link to Nim" title="Direct link to Nim">​</a></h5>
<p>Nim has module dependency resolution.<br>
<!-- -->The only uniqueness for building Nim is that you can only send one <code>.nim</code> file for each object you build.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="c-and-c">C and C++<a href="#c-and-c" class="hash-link" aria-label="Direct link to C and C++" title="Direct link to C and C++">​</a></h5>
<p>In C and C++ you will need to send all of your source files, because the compiler doesn&#x27;t understand dependency resolution.<br>
<!-- -->The <code>SomeFolder.glob(&quot;.ext&quot;)</code> function is created so that you don&#x27;t need to explicitly list all files in your project manually,<br>
<!-- -->and -also- maintain the list manually <em>(which is a PITA, time consuming, and extremely error and bug prone)</em>.</p>
<p>That said, you can also explicitely list the files manually if you so desire.<br>
<!-- -->This works for the same for both C and C++ files:</p>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> code </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">@</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;./mycode/file1.c&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;./myother/file2.c&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;./otherfolder/file4.c&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ... list 100 other files one by one in here ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><em>I would never recommend this, but... your project, your rules.</em></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-examples">Other Examples<a href="#other-examples" class="hash-link" aria-label="Direct link to Other Examples" title="Direct link to Other Examples">​</a></h2>
<p>More ways to configure the buildsystem are shown @<a href="https://github.com/heysokam/confy/tree/master/examples" target="_blank" rel="noopener noreferrer">the examples</a> folder.<br>
<!-- -->You can use those projects as templates for a new project, or just use them as inspiration instead.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buildsystem-customization">Buildsystem Customization<a href="#buildsystem-customization" class="hash-link" aria-label="Direct link to Buildsystem Customization" title="Direct link to Buildsystem Customization">​</a></h2>
<p>All the configuration variables are stored @<a href="https://github.com/heysokam/confy/tree/master/src/confy/cfg.nim" target="_blank" rel="noopener noreferrer">confy/cfg.nim</a>.<br>
<!-- -->To change them, just add <code>cfg.theVariable = value</code> at the top of your <code>build.nim</code> file.</p>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> confy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cfg</span><span class="token operator">.</span><span class="token plain">srcDir  </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;./code&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cfg</span><span class="token operator">.</span><span class="token plain">binDir  </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;./build&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cfg</span><span class="token operator">.</span><span class="token plain">verbose </span><span class="token operator">=</span><span class="token plain"> off</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cfg</span><span class="token operator">.</span><span class="token plain">quiet   </span><span class="token operator">=</span><span class="token plain"> on</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>See the @<a href="https://github.com/heysokam/confy/tree/master/doc/config.md" target="_blank" rel="noopener noreferrer">config.md</a> doc file, or @<a href="https://github.com/heysokam/confy/tree/master/src/confy/cfg.nim" target="_blank" rel="noopener noreferrer">confy/cfg.nim</a> for the complete list of variables that can be modified.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="keywords">Keywords<a href="#keywords" class="hash-link" aria-label="Direct link to Keywords" title="Direct link to Keywords">​</a></h2>
<blockquote>
<p><em>WIP: this section needs a better explanation</em></p>
</blockquote>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">make debug</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make mytarget</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make clean</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>debug</code> <code>clean</code> <code>mytarget</code> etc... are all <strong>Keywords</strong><br>
<!-- -->In confy, those keywords are defined when you call to build the target<br>
<!-- -->If you say:</p>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bin</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> keywords </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">@</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;thing&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;otherkeyword&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> run</span><span class="token operator">=</span><span class="token plain">true </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That means you <em>need</em> to call the confy builder with that keyword, otherwise it wont build that target because its filtered away.<br>
<!-- -->To trigger that keyword manually, you would have to say <code>build.exe thing</code> or <code>build.exe otherkeyword</code>.</p>
<p>Currently <em>(v0.1.7)</em> the <code>confy/nimble</code> file does not pass keywords into the builder. Only the <code>confy/nims</code> task does.<br>
<!-- -->Easiest way to work around this with nimble is to remove the keywords field and use version &gt;= 0.1.7,<br>
<!-- -->which adds an implied <code>&quot;all&quot;</code> keyword that runs when you don&#x27;t specify anything:</p>
<div class="language-nim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nim codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> bin </span><span class="token operator">=</span><span class="token plain"> Program</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;my/source/file.nim&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;mytarget&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bin</span><span class="token operator">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> run</span><span class="token operator">=</span><span class="token plain">true </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># &lt;-- automatically implied:   keywords = @[&quot;all&quot;, &quot;mytarget&quot;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Build it with:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#&gt;  ./bin/build.exe               &lt;-- Implied &quot;all&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#&gt;  ./bin/build.exe all           &lt;-- Explicit &quot;all&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#&gt;  ./bin/build.exe mytarget      &lt;-- Explicit target name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></article></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#basics" class="table-of-contents__link toc-highlight">Basics</a></li><li><a href="#two-files--the-builder-and-the-caller" class="table-of-contents__link toc-highlight">Two Files:  The Builder and the Caller</a><ul><li><a href="#the-caller-script" class="table-of-contents__link toc-highlight">The Caller Script</a></li><li><a href="#the-builder-app" class="table-of-contents__link toc-highlight">The Builder App</a></li></ul></li><li><a href="#other-examples" class="table-of-contents__link toc-highlight">Other Examples</a></li><li><a href="#buildsystem-customization" class="table-of-contents__link toc-highlight">Buildsystem Customization</a></li><li><a href="#keywords" class="table-of-contents__link toc-highlight">Keywords</a></li></ul></div></div></div></main></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Ivan Mar. CC-BY-SA-NC</div></div></div></footer></div>
</body>
</html>